(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58dd2ee0"],{"5ae5":function(t,i,e){"use strict";var s=e("ffaf"),a=e.n(s);a.a},bab5:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mv-detail"},[e("div",{staticClass:"mv-video",class:[t.isNight?"active":""]},[e("div",{staticClass:"w1200"},[e("div",{staticClass:"video-main"},[t.videoOptions.sources[0].src?e("video-player",{attrs:{options:t.videoOptions},on:{play:t.onPlay,pause:t.onPause,seeking:t.onSeeking,qualityChange:t.onQualityChange}}):t._e(),e("div",{staticClass:"mv-light",class:[t.isNight?"active":""],on:{click:t.toggleLight}},[e("i",{staticClass:"iconfont",class:[t.isNight?"icon-night":"icon-day"]})])],1),e("div",{staticClass:"mv-info"},[e("div",{staticClass:"mv-info-hd"},[e("div",{staticClass:"info-name"},[t._v(t._s(t.mvDetail.name))]),t._l(t.mvDetail.artists,(function(i,s){return e("router-link",{key:i.name,staticClass:"song-author",attrs:{to:{path:"/singer",query:{id:i.id}}}},[t._v(t._s(0!==s?" / "+i.name:i.name))])})),e("div",{staticClass:"mv-info-count"},[e("span",{staticClass:"info-count"},[t._v("播放量："+t._s(t.$utils.formartNum(t.mvDetail.playCount)))]),e("span",{staticClass:"info-time"},[t._v("发布时间："+t._s(t.mvDetail.publishTime))])])],2),e("div",{staticClass:"mv-desc"},[t._v(" "+t._s(t.mvDetail.briefDesc?t.mvDetail.briefDesc:"暂无简介")+" ")])])])]),e("div",{staticClass:"w1200"},[e("div",{staticClass:"mv-container"},[e("div",{staticClass:"mv-main"},[e("Comments",{attrs:{type:t.type,id:t.mId}})],1),e("div",{staticClass:"mv-aside"},[e("div",{staticClass:"simi-mv"},[e("h3",{staticClass:"aside-title"},[t._v("相似MV")]),e("div",{staticClass:"aside-main mv-main"},t._l(t.simiMv,(function(i,s){return e("div",{key:""+i.id+s,staticClass:"item"},[e("router-link",{staticClass:"faceImg",attrs:{to:{path:"/mv",query:{id:i.id}}}},[e("i",{staticClass:"iconfont icon-play"}),e("el-image",{attrs:{src:i.cover||i.imgurl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"mv-name",attrs:{to:{path:"/mv",query:{id:i.id}}}},[t._v(t._s(i.name))]),i.publishTime?t._e():e("router-link",{staticClass:"mv-author",attrs:{to:{path:"/singer",query:{id:i.artistId}}}},[t._v(t._s(i.artistName))]),e("div",{staticClass:"mv-playCount"},[e("i",{staticClass:"iconfont icon-video"}),t._v(" "+t._s(t.$utils.formartNum(i.playCount)))]),i.publishTime?e("div",{staticClass:"mv-time"},[t._v("发布时间："+t._s(i.publishTime))]):t._e()],1)],1)})),0)])])])])])},a=[],n=(e("4160"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("96cf"),e("1da1")),r=e("5530"),o=e("0de3"),c=e("09a4"),u=e("2f62"),l={name:"mvDetail",components:{videoPlayer:o["a"],Comments:c["a"]},data:function(){return{mId:this.$route.query.id,mvDetail:{},type:1,videoOptions:{sources:[{type:"",src:""}],qualityList:[],quality:{}},currentTime:0,simiMv:[],isNight:!1}},computed:{},mounted:function(){this.init(),this.setPlayStatus(!1)},methods:Object(r["a"])(Object(r["a"])({},Object(u["d"])({setPlayStatus:"SET_PLAYSTATUS"})),{},{getMvDetail:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var e,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$http.mvDetail({id:t.mId});case 2:if(e=i.sent,s=e.data,200===s.code){i.next=6;break}return i.abrupt("return",t.$msg.error("数据请求失败"));case 6:t.mvDetail=s.data,t.videoOptions.qualityList=s.data.brs,t.videoOptions.quality=s.mp;case 9:case"end":return i.stop()}}),i)})))()},getMvUrl:function(t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.$http.mvUrl({id:i.mId,r:t});case 2:if(s=e.sent,a=s.data,200===a.code){e.next=6;break}return e.abrupt("return",i.$msg.error("数据请求失败"));case 6:i.$set(i.videoOptions.sources,0,{type:"video/mp4",src:a.data.url});case 7:case"end":return e.stop()}}),e)})))()},getSimiMv:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var e,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$http.simiMv({id:t.mId});case 2:if(e=i.sent,s=e.data,200===s.code){i.next=6;break}return i.abrupt("return",t.$msg.error("数据请求失败"));case 6:t.simiMv=s.mvs;case 7:case"end":return i.stop()}}),i)})))()},init:function(){var t=this,i=this.$http.mvDetail({id:this.mId}),e=this.$http.mvUrl({id:this.mId});this.currentTime=0,Promise.all([i,e]).then((function(i){i.forEach((function(i,e){var s=i.data;if(0===e){if(200!==s.code)return t.$msg.error("数据请求失败");t.mvDetail=s.data,t.videoOptions.qualityList=s.data.brs,t.videoOptions.quality={br:s.mp.dl}}else{if(200!==s.code)return t.$msg.error("数据请求失败");t.$set(t.videoOptions.sources,0,{type:"video/mp4",src:s.data.url})}}))})),this.getSimiMv()},onPlay:function(t){t.currentTime(this.currentTime)},onSeeking:function(t){this.currentTime=t.currentTime()},onPause:function(t){this.currentTime=t.currentTime(),t.pause()},onQualityChange:function(t){this.onPause(t),this.currentTime=t.currentTime(),this.getMvUrl(t.quality.val)},toggleLight:function(){this.isNight=!this.isNight}}),watch:{$route:function(t,i){this.mId=this.$route.query.id,this.mId&&this.init()}}},m=l,d=(e("5ae5"),e("2877")),v=Object(d["a"])(m,s,a,!1,null,"35631a05",null);i["default"]=v.exports},ffaf:function(t,i,e){}}]);
//# sourceMappingURL=chunk-58dd2ee0.1d461c38.js.map