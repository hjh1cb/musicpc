(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34e83534"],{"028c":function(t,s,i){},"389a":function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"rank"},[i("div",{staticClass:"w1200"},[i("div",{staticClass:"rank-container"},[i("div",{staticClass:"rank-aside"},[i("div",{staticClass:"rank-type"},[i("div",{staticClass:"type-hd"},[i("span",{class:"Top"===t.type?"active":"",on:{click:function(s){return t.selectType("Top")}}},[t._v("TOP榜")]),i("span",{class:"Feature"===t.type?"active":"",on:{click:function(s){return t.selectType("Feature")}}},[t._v("特色榜")]),i("span",{class:"Other"===t.type?"active":"",on:{click:function(s){return t.selectType("Other")}}},[t._v("场景榜")])]),i("div",{staticClass:"type-main"},t._l(t.list,(function(s,a){return i("div",{key:a,staticClass:"type-item",class:t.rId==s.id?"active":"",on:{click:function(i){return t.selectItem(s)}}},[i("el-image",{staticClass:"item-img",attrs:{src:s.coverImgUrl}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[i("i",{staticClass:"iconfont icon-placeholder"})])]),i("div",{staticClass:"item-info"},[i("div",{staticClass:"item-title"},[t._v(" "+t._s(s.name)+" ")]),i("div",{staticClass:"item-time"},[t._v(" "+t._s(s.updateFrequency)+" ")])])],1)})),0)])]),i("div",{staticClass:"rank-main"},[i("div",{staticClass:"rank-list-hd"},[i("el-image",{staticClass:"rank-img",attrs:{src:t.rankInfo.coverImgUrl}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[i("i",{staticClass:"iconfont icon-placeholder"})])]),t.rankInfo?i("div",{staticClass:"rank-info"},[i("div",{staticClass:"rank-title"},[t._v(" "+t._s(t.rankInfo.name)+" "),i("span",[t._v("("+t._s(t.$utils.formartDate(t.rankInfo.updateTime,"MM月dd日"))+" 更新)")])]),t.rankInfo.tags?i("div",{staticClass:"rank-tags"},t._l(t.rankInfo.tags,(function(s,a){return i("router-link",{key:a,staticClass:"tag",attrs:{to:{path:"/playlist",query:{cat:s}}}},[t._v("#"+t._s(s))])})),1):t._e(),i("div",{staticClass:"rank-digital"},[i("span",{staticClass:"rank-playCount"},[i("i",{staticClass:"iconfont icon-playnum"}),t._v(" "+t._s(t.$utils.formartNum(t.rankInfo.playCount))+"次")]),i("span",{staticClass:"rank-collect"},[i("i",{staticClass:"iconfont icon-collect"}),t._v(" "+t._s(t.$utils.formartNum(t.rankInfo.subscribedCount)))]),i("span",{staticClass:"rank-comment"},[i("i",{staticClass:"iconfont icon-comment"}),t._v(" "+t._s(t.$utils.formartNum(t.rankInfo.commentCount)))])]),i("div",{staticClass:"rank-desc"},[t._v(" "+t._s(t.rankInfo.description)+" ")])]):t._e()],1),i("div",{staticClass:"song-header"},[i("h4",[t._v("歌曲列表 "),i("em",[t._v(t._s(t.total+"首歌"))])]),i("span",{staticClass:"play-all",on:{click:t.playAllSongs}},[i("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")])]),t.isLoading?[i("Loading")]:[i("song-list",{attrs:{songList:t.songList,stripe:!0}})]],2)])])])},e=[],n=(i("4de4"),i("c975"),i("d81d"),i("b0c0"),i("96cf"),i("1da1")),r=i("5530"),c=i("2f62"),l=i("eb4d"),o=i("18fd"),u=i("bf93"),p={name:"Rank",components:{songList:o["a"],Loading:u["a"]},data:function(){return{list:[],type:"Top",listTop:[],listFeature:[],listOther:[],rId:0,rankInfo:{},songList:[],isLoading:!0,total:0}},computed:{},created:function(){this.rId=this.$route.query.rId,this.type=this.$route.query.type?this.$route.query.type:this.type},mounted:function(){this.getTopListDetail()},methods:Object(r["a"])(Object(r["a"])({},Object(c["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayIndex:"SET_PLAYINDEX"})),{},{getTopListDetail:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$http.topListDetail();case 2:if(i=s.sent,a=i.data,200===a.code){s.next=6;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 6:t.listTop=a.list.filter((function(t){return t.ToplistType})),t.listFeature=a.list.filter((function(t){return!t.ToplistType&&t.name.indexOf("云音乐")>=0})),t.listOther=a.list.filter((function(t){return!t.ToplistType&&t.name.indexOf("云音乐")<0})),t.list=t.type?t["list"+t.type]:t.listTop,t.rId=t.rId?t.rId:t.listTop[0].id;case 11:case"end":return s.stop()}}),s)})))()},getListDetail:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.$http.listDetail({id:t.rId,s:-1});case 3:if(i=s.sent,a=i.data,200===a.code){s.next=7;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 7:t.rankInfo=a.playlist,t.songList=t._formatSongs(a.playlist.tracks,a.privileges),t.total=t.songList.length,t.isLoading=!1;case 11:case"end":return s.stop()}}),s)})))()},selectType:function(t){this.type=t,this.list=this["list"+this.type],this.rId=this["list"+t][0].id,this.$router.push({path:"rank",query:{type:this.type,rId:this.rId}})},selectItem:function(t){this.rId=t.id,this.$router.push({path:"rank",query:{type:this.type,rId:this.rId}})},playAllSongs:function(){this.playAll({list:this.songList})},_formatSongs:function(t,s){var i=[];return t.map((function(t,a){t.id&&(t.license=!s[a].cp,i.push(Object(l["a"])(t)))})),i}},Object(c["b"])(["playAll"])),watch:{rId:function(t,s){this.rId=t,this.rId&&this.getListDetail()}}},d=p,f=(i("8979"),i("2877")),h=Object(f["a"])(d,a,e,!1,null,"7cfb1694",null);s["default"]=h.exports},8979:function(t,s,i){"use strict";var a=i("028c"),e=i.n(a);e.a}}]);
//# sourceMappingURL=chunk-34e83534.1ab7f6d0.js.map